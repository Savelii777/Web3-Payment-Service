(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{241:function(e,t,n){},255:function(e,t){},258:function(e,t){},261:function(e,t){},265:function(e,t){},289:function(e,t){},291:function(e,t){},300:function(e,t){},302:function(e,t){},312:function(e,t){},314:function(e,t){},423:function(e,t){},425:function(e,t){},432:function(e,t){},433:function(e,t){},545:function(e,t,n){},550:function(e,t,n){"use strict";n.r(t);var o=n(33),a=n.n(o),s=n(229),i=n.n(s),c=(n(241),n(89)),r=n.n(c),l=n(8);function d(e){let{message:t}=e;return t?Object(l.jsx)("div",{className:"alert alert-error mt-5",children:Object(l.jsxs)("div",{className:"flex-1",children:[Object(l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(l.jsx)("label",{children:t})]})}):null}function u(e){let{txs:t}=e;return 0===t.length?null:Object(l.jsx)(l.Fragment,{children:t.map((e=>Object(l.jsx)("div",{className:"alert alert-info mt-5",children:Object(l.jsx)("div",{className:"flex-1",children:Object(l.jsx)("label",{children:e.hash})})},e)))})}var m=n(231),p=n(91),b=n(92),w=n(125),h=n.n(w),g=(n(545),n(71)),f=n.n(g);var j=e=>{let{onPressLogout:t,onPressConnect:n,loading:o,address:a}=e;return Object(l.jsx)("div",{children:a&&!o?Object(l.jsx)("button",{onClick:t,className:f.a["connect-wallet"],children:"Disconnect"}):o?Object(l.jsx)("button",{className:"".concat(f.a["connect-wallet"]," ").concat(f.a["connect-button-loading"]),disabled:!0,children:Object(l.jsx)("div",{children:"Loading..."})}):Object(l.jsx)("button",{onClick:n,className:f.a["connect-wallet"],children:"Connect Wallet"})})};var v=()=>{var e,t;let n=!1;var o;return o=(null===(e=navigator)||void 0===e?void 0:e.userAgent)||(null===(t=navigator)||void 0===t?void 0:t.vendor)||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(n=!0),n};var x=e=>new function(e){if(!e)throw new Error("no options");var t=!0,n=!1;function o(){t=!1}function a(e){"hidden"===e.target.visibilityState&&(n=!0)}function s(){n?(e.onReturn&&e.onReturn(),n=!1):!t&&e.onFallback&&setTimeout((function(){n||e.onFallback()}),1e3),t=!0}function i(e){[[window,"blur",o],[document,"visibilitychange",a],[window,"focus",s]].forEach((function(t){t[0][e+"EventListener"](t[1],t[2])}))}i("add"),this.destroy=i.bind(null,"remove"),this.openURL=function(n){setTimeout((function(){t&&e.onIgnored&&e.onIgnored()}),500),window.location=n}}({onIgnored:function(){window.open(e),console.log("browser failed to respond to the deep link")},onFallback:function(){console.log("dialog hidden or user returned to tab")},onReturn:function(){console.log("user returned to the page from the native app")}});const k=Object(m.a)({apiKey:"AIzaSyB1fGu9E8w2NUsf05uMKH1Coq6sEx6kVm0",authDomain:"metamsk-a5083.firebaseapp.com",databaseURL:"https://metamsk-a5083-default-rtdb.europe-west1.firebasedatabase.app",projectId:"metamsk-a5083",storageBucket:"metamsk-a5083.appspot.com",messagingSenderId:"807002056444",appId:"1:807002056444:web:6fe0e3850f16a7988bd979",measurementId:"G-S29PJYNV79"}),O=Object(b.a)(k);var y=()=>{const[e,t]=Object(o.useState)(!1),[n,a]=Object(o.useState)(""),[s,i]=Object(o.useState)(),[c,m]=Object(o.useState)([]),w=async e=>{var t,n;const o="http://localhost:4000",s=await h.a.get("".concat(o,"/message?address=").concat(e)),i=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.messageToSign;if(!i)throw new Error("Invalid message to sign");const c=new r.a(r.a.givenProvider),l=await c.eth.personal.sign(i,e),d=await h.a.get("".concat(o,"/jwt?address=").concat(e,"&signature=").concat(l)),u=null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.customToken;if(!u)throw new Error("Invalid JWT");await Object(b.b)(O,u),a(e)};return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("header",{className:"App-header",children:[Object(l.jsx)(j,{onPressConnect:async()=>{t(!0);try{var e,n;const t="https://metamask.app.link/dapp/".concat("mysite.com"),o="https://metamask.io/download.html";if(null!==(e=window)&&void 0!==e&&null!==(n=e.ethereum)&&void 0!==n&&n.isMetaMask){const e=await window.ethereum.request({method:"eth_requestAccounts"}),t=r.a.utils.toChecksumAddress(e[0]);await w(t)}else if(v()){x(o).openURL(t)}else window.open(o)}catch(s){console.log(s),a("")}t(!1)},onPressLogout:()=>{a(""),Object(b.c)(O)},loading:e,address:n}),Object(l.jsx)("form",{className:"m-4",onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target);i(),await(async e=>{let{setError:t,setTxs:n,ether:o,addr:a}=e;try{if(!window.ethereum)throw new Error("No crypto wallet found. Please install it.");await window.ethereum.send("eth_requestAccounts");const e=new p.a.providers.Web3Provider(window.ethereum).getSigner();p.a.utils.getAddress(a);const t=await e.sendTransaction({to:a,value:p.a.utils.parseEther(o)});console.log({ether:o,addr:a}),console.log("tx",t),n([t])}catch(s){t(s.message)}})({setError:i,setTxs:m,ether:t.get("ether"),addr:t.get("addr")})},children:Object(l.jsxs)("div",{className:"credit-card w-full lg:w-1/2 sm:w-auto shadow-lg mx-auto rounded-xl bg-white",children:[Object(l.jsxs)("main",{className:"mt-4 p-4",children:[Object(l.jsx)("h1",{className:"text-xl font-semibold text-gray-700 text-center",children:"Send ETH payment"}),Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("div",{className:"my-3",children:Object(l.jsx)("input",{type:"text",name:"addr",className:"input input-bordered block w-full focus:ring focus:outline-none",placeholder:"Recipient Address"})}),Object(l.jsx)("div",{className:"my-3",children:Object(l.jsx)("input",{name:"ether",type:"text",className:"input input-bordered block w-full focus:ring focus:outline-none",placeholder:"Amount in ETH"})})]})]}),Object(l.jsxs)("footer",{className:"p-4",children:[Object(l.jsx)("button",{type:"submit",className:"btn btn-primary submit-button focus:ring focus:outline-none w-full",children:"Pay now"}),Object(l.jsx)(d,{message:s}),Object(l.jsx)(u,{txs:c})]})]})})]})})};var N=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,556)).then((t=>{let{getCLS:n,getFID:o,getFCP:a,getLCP:s,getTTFB:i}=t;n(e),o(e),a(e),s(e),i(e)}))};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),N()},71:function(e,t,n){e.exports={"connect-wallet":"ConnectWallet_connect-wallet__1b4Yd","connect-wallet-loading":"ConnectWallet_connect-wallet-loading__xWvIr"}}},[[550,1,2]]]);
//# sourceMappingURL=main.908dfb4e.chunk.js.map