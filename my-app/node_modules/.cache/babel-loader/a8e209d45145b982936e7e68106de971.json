{"ast":null,"code":"const getLinker=fallbackUrl=>{function DeepLinker(options){if(!options){throw new Error(\"no options\");}var hasFocus=true;var didHide=false;// window is blurred when dialogs are shown\nfunction onBlur(){hasFocus=false;}// document is hidden when native app is shown or browser is backgrounded\nfunction onVisibilityChange(e){if(e.target.visibilityState===\"hidden\"){didHide=true;}}// window is focused when dialogs are hidden, or browser comes into view\nfunction onFocus(){if(didHide){if(options.onReturn){options.onReturn();}didHide=false;// reset\n}else{// ignore duplicate focus event when returning from native app on\n// iOS Safari 13.3+\nif(!hasFocus&&options.onFallback){// wait for app switch transition to fully complete - only then is\n// 'visibilitychange' fired\nsetTimeout(function(){// if browser was not hidden, the deep link failed\nif(!didHide){options.onFallback();}},1000);}}hasFocus=true;}// add/remove event listeners\n// `mode` can be \"add\" or \"remove\"\nfunction bindEvents(mode){[[window,\"blur\",onBlur],[document,\"visibilitychange\",onVisibilityChange],[window,\"focus\",onFocus]].forEach(function(conf){conf[0][mode+\"EventListener\"](conf[1],conf[2]);});}// add event listeners\nbindEvents(\"add\");// expose public API\nthis.destroy=bindEvents.bind(null,\"remove\");this.openURL=function(url){// it can take a while for the dialog to appear\nvar dialogTimeout=500;setTimeout(function(){if(hasFocus&&options.onIgnored){options.onIgnored();}},dialogTimeout);window.location=url;};}const linker=new DeepLinker({onIgnored:function(){window.open(fallbackUrl);console.log(\"browser failed to respond to the deep link\");},onFallback:function(){console.log(\"dialog hidden or user returned to tab\");},onReturn:function(){console.log(\"user returned to the page from the native app\");}});return linker;};export default getLinker;","map":{"version":3,"names":["getLinker","fallbackUrl","DeepLinker","options","Error","hasFocus","didHide","onBlur","onVisibilityChange","e","target","visibilityState","onFocus","onReturn","onFallback","setTimeout","bindEvents","mode","window","document","forEach","conf","destroy","bind","openURL","url","dialogTimeout","onIgnored","location","linker","open","console","log"],"sources":["/home/savelii/Рабочий стол/Web3-Login/my-app/src/helpers/deepLink.js"],"sourcesContent":["const getLinker = (fallbackUrl) => {\n  function DeepLinker(options) {\n    if (!options) {\n      throw new Error(\"no options\");\n    }\n\n    var hasFocus = true;\n    var didHide = false;\n\n    // window is blurred when dialogs are shown\n    function onBlur() {\n      hasFocus = false;\n    }\n\n    // document is hidden when native app is shown or browser is backgrounded\n    function onVisibilityChange(e) {\n      if (e.target.visibilityState === \"hidden\") {\n        didHide = true;\n      }\n    }\n\n    // window is focused when dialogs are hidden, or browser comes into view\n    function onFocus() {\n      if (didHide) {\n        if (options.onReturn) {\n          options.onReturn();\n        }\n\n        didHide = false; // reset\n      } else {\n        // ignore duplicate focus event when returning from native app on\n        // iOS Safari 13.3+\n        if (!hasFocus && options.onFallback) {\n          // wait for app switch transition to fully complete - only then is\n          // 'visibilitychange' fired\n          setTimeout(function () {\n            // if browser was not hidden, the deep link failed\n            if (!didHide) {\n              options.onFallback();\n            }\n          }, 1000);\n        }\n      }\n\n      hasFocus = true;\n    }\n\n    // add/remove event listeners\n    // `mode` can be \"add\" or \"remove\"\n    function bindEvents(mode) {\n      [\n        [window, \"blur\", onBlur],\n        [document, \"visibilitychange\", onVisibilityChange],\n        [window, \"focus\", onFocus],\n      ].forEach(function (conf) {\n        conf[0][mode + \"EventListener\"](conf[1], conf[2]);\n      });\n    }\n\n    // add event listeners\n    bindEvents(\"add\");\n\n    // expose public API\n    this.destroy = bindEvents.bind(null, \"remove\");\n    this.openURL = function (url) {\n      // it can take a while for the dialog to appear\n      var dialogTimeout = 500;\n\n      setTimeout(function () {\n        if (hasFocus && options.onIgnored) {\n          options.onIgnored();\n        }\n      }, dialogTimeout);\n\n      window.location = url;\n    };\n  }\n\n  const linker = new DeepLinker({\n    onIgnored: function () {\n      window.open(fallbackUrl);\n      console.log(\"browser failed to respond to the deep link\");\n    },\n    onFallback: function () {\n      console.log(\"dialog hidden or user returned to tab\");\n    },\n    onReturn: function () {\n      console.log(\"user returned to the page from the native app\");\n    },\n  });\n\n  return linker;\n};\n\nexport default getLinker;\n"],"mappings":"AAAA,KAAM,CAAAA,SAAS,CAAIC,WAAW,EAAK,CACjC,QAAS,CAAAC,UAAUA,CAACC,OAAO,CAAE,CAC3B,GAAI,CAACA,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,YAAY,CAAC,CAC/B,CAEA,GAAI,CAAAC,QAAQ,CAAG,IAAI,CACnB,GAAI,CAAAC,OAAO,CAAG,KAAK,CAEnB;AACA,QAAS,CAAAC,MAAMA,CAAA,CAAG,CAChBF,QAAQ,CAAG,KAAK,CAClB,CAEA;AACA,QAAS,CAAAG,kBAAkBA,CAACC,CAAC,CAAE,CAC7B,GAAIA,CAAC,CAACC,MAAM,CAACC,eAAe,GAAK,QAAQ,CAAE,CACzCL,OAAO,CAAG,IAAI,CAChB,CACF,CAEA;AACA,QAAS,CAAAM,OAAOA,CAAA,CAAG,CACjB,GAAIN,OAAO,CAAE,CACX,GAAIH,OAAO,CAACU,QAAQ,CAAE,CACpBV,OAAO,CAACU,QAAQ,CAAC,CAAC,CACpB,CAEAP,OAAO,CAAG,KAAK,CAAE;AACnB,CAAC,IAAM,CACL;AACA;AACA,GAAI,CAACD,QAAQ,EAAIF,OAAO,CAACW,UAAU,CAAE,CACnC;AACA;AACAC,UAAU,CAAC,UAAY,CACrB;AACA,GAAI,CAACT,OAAO,CAAE,CACZH,OAAO,CAACW,UAAU,CAAC,CAAC,CACtB,CACF,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CAEAT,QAAQ,CAAG,IAAI,CACjB,CAEA;AACA;AACA,QAAS,CAAAW,UAAUA,CAACC,IAAI,CAAE,CACxB,CACE,CAACC,MAAM,CAAE,MAAM,CAAEX,MAAM,CAAC,CACxB,CAACY,QAAQ,CAAE,kBAAkB,CAAEX,kBAAkB,CAAC,CAClD,CAACU,MAAM,CAAE,OAAO,CAAEN,OAAO,CAAC,CAC3B,CAACQ,OAAO,CAAC,SAAUC,IAAI,CAAE,CACxBA,IAAI,CAAC,CAAC,CAAC,CAACJ,IAAI,CAAG,eAAe,CAAC,CAACI,IAAI,CAAC,CAAC,CAAC,CAAEA,IAAI,CAAC,CAAC,CAAC,CAAC,CACnD,CAAC,CAAC,CACJ,CAEA;AACAL,UAAU,CAAC,KAAK,CAAC,CAEjB;AACA,IAAI,CAACM,OAAO,CAAGN,UAAU,CAACO,IAAI,CAAC,IAAI,CAAE,QAAQ,CAAC,CAC9C,IAAI,CAACC,OAAO,CAAG,SAAUC,GAAG,CAAE,CAC5B;AACA,GAAI,CAAAC,aAAa,CAAG,GAAG,CAEvBX,UAAU,CAAC,UAAY,CACrB,GAAIV,QAAQ,EAAIF,OAAO,CAACwB,SAAS,CAAE,CACjCxB,OAAO,CAACwB,SAAS,CAAC,CAAC,CACrB,CACF,CAAC,CAAED,aAAa,CAAC,CAEjBR,MAAM,CAACU,QAAQ,CAAGH,GAAG,CACvB,CAAC,CACH,CAEA,KAAM,CAAAI,MAAM,CAAG,GAAI,CAAA3B,UAAU,CAAC,CAC5ByB,SAAS,CAAE,QAAAA,CAAA,CAAY,CACrBT,MAAM,CAACY,IAAI,CAAC7B,WAAW,CAAC,CACxB8B,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CAC3D,CAAC,CACDlB,UAAU,CAAE,QAAAA,CAAA,CAAY,CACtBiB,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CACtD,CAAC,CACDnB,QAAQ,CAAE,QAAAA,CAAA,CAAY,CACpBkB,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC,CAC9D,CACF,CAAC,CAAC,CAEF,MAAO,CAAAH,MAAM,CACf,CAAC,CAED,cAAe,CAAA7B,SAAS"},"metadata":{},"sourceType":"module"}